@model Virtus.Models.Produto

<div class="row">
    <div class="col-md-8 mx-auto rounded border p-3">
        <h2 class="text-center mb-5">Novo Produto</h2>


        <form method="post" enctype="multipart/form-data">
            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Nome</label>
                <div class="col-sm-8">
                    <input class="form-control" asp-for="Nome">
                    <span asp-validation-for="Nome" class="text-danger"></span>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Marca</label>
                <div class="col-sm-8">
                    <input class="form-control" asp-for="Marca">
                    <span asp-validation-for="Marca" class="text-danger"></span>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Categoria</label>
                <div class="col-sm-8">
                    <select class="form-select" asp-for="Categoria">
                        <option value='Masculino'>Masculino</option>
                        <option value='Feminino'>Feminino</option>
                        <option value='Infantil'>Infantil</option>
                        <option value='Esportes'>Esportes</option>
                    </select>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Tipo</label>
                <div class="col-sm-8">
                    <select class="form-select" asp-for="Tipo">
                        <option value='Acessório'>Acessório</option>
                        <option value='Agasalho'>Agasalho</option>
                        <option value='Bermuda'>Bermuda</option>
                        <option value='Calça'>Calça</option>
                        <option value='Camiseta'>Camiseta</option>
                        <option value='Esporte'>Esporte</option>
                        <option value='Tenis'>Tênis</option>

                    </select>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Preço (R$)</label>
                <div class="col-sm-8">
                    <input asp-for="Preco" class="form-control" id="Preco" type="text" placeholder="0,00" />
                    <span asp-validation-for="Preco" class="text-danger"></span>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Descrição</label>
                <div class="col-sm-8">
                    <textarea class="form-control" asp-for="Descricao"></textarea>
                    <span asp-validation-for="Descricao" class="text-danger"></span>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Imagem</label>
                <div class="col-sm-8">
                    <input type="file" class="form-control" name="imagemArquivo" accept="image/*">
                    <span asp-validation-for="ImageUrl" class="text-danger"></span>
                </div>
            </div>

            <div class="row mb-3">
                <label class="col-sm-4 col-form-label">Estoque</label>
                <div class="col-sm-8">
                    <input class="form-control" asp-for="Estoque">
                    <span asp-validation-for="Estoque" class="text-danger"></span>
                </div>
            </div>

            <div class="row">
                <div class="offset-sm-4 col-sm-4 d-grid">
                    <button type="submit" class="btn btn-primary">Submit</button>
                </div>
                <div class="col-sm-4 d-grid">
                    <a class="btn btn-outline-primary" asp-controller="Produto" asp-action="Index" role="button">
                        Cancel
                    </a>
                </div>
            </div>

        </form>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const precoInput = document.getElementById("Preco");

            // Valor inicial formatado
            if (!precoInput.value) {
                precoInput.value = "0,00";
            }

            precoInput.addEventListener("input", function (e) {
                let value = e.target.value;

                // Remove tudo que não for número
                value = value.replace(/\D/g, "");

                // Se vazio, assume 0
                if (value === "") {
                    value = "0";
                }

                // Converte para centavos e insere a vírgula
                value = (parseInt(value) / 100).toFixed(2);

                // Substitui ponto por vírgula
                value = value.replace(".", ",");

                e.target.value = value;
            });

            // Garante o formato correto ao perder o foco
            precoInput.addEventListener("blur", function (e) {
                if (e.target.value === "" || e.target.value === "0") {
                    e.target.value = "0,00";
                }
            });
        });
    </script>
}
